import React, { useContext, useEffect, useState } from "react";
import "../../styles/SearchResult/SearchResult.css";
import Card from "@mui/material/Card";
import CardActions from "@mui/material/CardActions";
import CardContent from "@mui/material/CardContent";
import Button from "@mui/material/Button";
import SearchInput from "../Home/SearchInput";
import { Alert, AlertTitle } from "@mui/material";
import DemoPaper from "@mui/material/Paper";
import { FontAwesomeIcon } from "@fortawesome/react-fontawesome";
import { faFilePdf } from "@fortawesome/free-solid-svg-icons";
import { useSearchResult } from './SearchResultContext';
import MostRelevantDoc from "./MostRelevantDoc";
import RelevantDoc from "./RelevantDoc";

// interface SearchResult {
//   relevant_docs: [],
//   relevent_paragraphs: [];
//   // Andere Eigenschaften von SearchResult
// }

const SearchResult = () => {
  const [fileBlob, setFileBlob] = useState("");
  const { searchResult, setSearchResult } = useSearchResult();

  useEffect(() => {

    console.log(searchResult)
    // const API_GetDocument = async () => {
    //   const user_id = localStorage.getItem("userID");
    //   const filename = "Dok1";

    //   const fetchString = `${process.env.REACT_APP_production_address}/document?user_id=${user_id}&document_name=${filename}`
    //   return await fetch(fetchString, {
    //     method: "GET",
    //   }).then(async (res) => {
    //     const blob = await res.blob();
    //     const pdfUrl = URL.createObjectURL(blob);
    //     setFileBlob(pdfUrl);
    //   });
    // };
    // API_GetDocument()
  }, []);

  return (
    <div id="searchResult-container">
      <SearchInput></SearchInput>

      <Alert id="Alert" severity="success">
        <AlertTitle>The Answer has been generated by AI</AlertTitle>
      </Alert>

      <MostRelevantDoc></MostRelevantDoc>

      {searchResult.relevant_docs.map((item: string, index: number) => {

        if (index !== 0) {
          return <RelevantDoc docName={item}></RelevantDoc>;
        }})}
    </div>

  );
};
export default SearchResult;
